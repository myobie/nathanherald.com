<!DOCTYPE html>
<html>
  <head lang="en-us">
    <meta content="HTML Tidy for HTML5 for Apple macOS version 5.8.0" name="generator">
    <meta charset="UTF-8">
    <title>
      I‚Äòm Nathan Herald ‚Üí How I restored and setup my new (to me) $10 iPod shuffle (2nd Gen) with
      my M1 Mac running Sonoma
    </title>
    <script>
      if ((new URL(window.location.href)).host === 'myobie.com') { window.location.assign('https://nathanherald.com') }
    </script>
    <link href="https://nathanherald.com/posts/ipod-shuffle/" rel="canonical">
    <link href="https://cloud.typography.com/6836312/761366/css/fonts.css" rel="stylesheet" type=
    "text/css">
    <link href="/styles.css" rel="stylesheet" type="text/css">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="Hugo 0.136.5" name="generator">
    <meta content=
    "I‚Äòm Nathan Herald ‚Üí How I restored and setup my new (to me) $10 iPod shuffle (2nd Gen) with my M1 Mac running Sonoma"
    name="title">
    <meta content="" name="description">
    <meta content=
    "How I restored and setup my new (to me) $10 iPod shuffle (2nd Gen) with my M1 Mac running Sonoma"
    property="og:title">
    <meta content="website" property="og:type">
    <meta content="" property="og:description">
    <meta content="https://nathanherald.com/posts/ipod-shuffle/" property="og:url">
    <meta content="/og.png" property="og:image">
    <meta content="I‚Äòm Nathan Herald" property="og:site_name">
    <link href="/rss.xml" rel="alternate" title="Feed of all the posts on nathanherald.com" type=
    "application/rss+xml">
  </head>
  <body class="default">
    <header class="section-header">
      <div class="section-nav">
        <h1 class="home-link">
          <a class="never-underline" data-nospan="" href="/"><abbr title="Hello">üëã</abbr></a>
          <a href="/">I‚Äôm Nathan</a>
        </h1>
        <nav>
          <p>
            Find more in the <a href="/posts/">archive of all the posts on this site</a> or
            <a href="/posts/rss.xml">subscribe with RSS</a>.
          </p>
        </nav>
      </div>
    </header>
    <main class="single">
      <article>
        <header>
          <h1>
            How I restored and setup my new (to me) $10 iPod shuffle (2nd Gen) with my M1 Mac
            running Sonoma
          </h1>
          <p class="annotation">
            ‚≠êÔ∏è a blog post
          </p>
        </header>
        <div class="content">
          <p>
            I‚Äôve had a hankering for an iPod for a while, so I decided to take the plunge and get a
            shuffle to try it out. My phone is too important now! And I don‚Äôt really want to drain
            the battery all the time when I‚Äôm out and about‚Ä¶ I already have a camera, now a music
            player, if I buy a physical map then I‚Äôll have my own App Store in my backpack ü§¶
          </p>
          <p>
            Getting the iPod shuffle setup wasn‚Äôt straightforward‚Ä¶ so here is how I got it all
            working.
          </p>
          <p>
            I bought mine on <a href="https://www.kleinanzeigen.de">Kleinanzeigen</a> for 10 bucks.
            The person was very prompt. They let me use the in-app purchase system ‚Äì which I prefer
            and recommend, don‚Äôt ‚Äúsend PayPal friends and family‚Äù to people. Not too scary, it all
            Just Worked‚Ñ¢
          </p>
          <h2 id="1-restore">
            1) Restore‚Ä¶
          </h2>
          <p>
            Restoring on macOS isn‚Äôt as easy anymore. The parts of iTunes that used to sync with
            iPods is now in the Finder! And my Finder crashed when I tried to restore the iPod.
            When I tried again, it hung forever and never finished. <em>(If your Finder allows you
            to restore the iPod then you can skip right to step 2!)</em>
          </p>
          <p>
            What I learned is: <strong>iTunes still works and you can still download iTunes on
            Windows</strong> üí™
          </p>
          <p>
            Running Windows is actually pretty easy these days with <a href=
            "https://mac.getutm.app">UTM</a>. I had remembered companies like Parallels and VM
            Ware, but those cannot emulate x86 Windows on my M1 (ARM) Mac and we need the x86
            version of iTunes‚Ä¶ so UTM is it.
          </p>
          <h3 id="utm-is-a-whole-deal">
            UTM is a whole deal
          </h3>
          <p>
            While UTM is free and it works well, it is not easy to figure out how to get it all
            working correctly.
          </p>
          <p>
            And sadly, the best info I found is all glommed up in this YouTube video: <a href=
            "https://www.youtube.com/watch?v=KsNoGPczavw">How to install Windows 10 on M1 Mac ‚Äì
            Full Tutorial using UTM app</a>. Now <em>I am very grateful that this video
            exists,</em> but I prefer to not need to pause, back up, go forward, etc for an hour‚Ä¶
          </p>
          <p>
            Here are the important steps in text:
          </p>
          <ol>
            <li>Install <a href="https://mac.getutm.app">UTM</a>
            </li>
            <li>Download a Windows 10 ISO from here: <a href=
            "https://www.microsoft.com/en-us/software-download/windows10ISO">https://www.microsoft.com/en-us/software-download/windows10ISO</a>
            (an ISO is a virtual CD, so this is basically the install CD)
            </li>
            <li>Download the drivers you need from here: <a href=
            "https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/archive-virtio/virtio-win-0.1.190-1/">
              https://fedorapeople.org/groups/virt/virtio-win/direct-downloads/archive-virtio/virtio-win-0.1.190-1/</a>
              (these are the Fedora drivers and they will help UTM know how to get Windows 10
              working well, these are also on a virtual CD)
              <ul>
                <li>Do not get the latest version of these drivers, only use this specific 190
                version linked above. It‚Äôs tempting to use a version in the 200s, it feels like we
                should use the newest ones, but don‚Äôt do it. Use this 190 version.
                </li>
              </ul>
            </li>
            <li>Download the ‚ÄúGuest Tools‚Äù from here: <a href=
            "https://github.com/utmapp/qemu/releases/download/v7.0.0-utm/spice-guest-tools-0.164.4.iso">
              https://github.com/utmapp/qemu/releases/download/v7.0.0-utm/spice-guest-tools-0.164.4.iso</a>
              (you can read more about the ‚ÄúGuest Tools‚Äù here <a href=
              "https://docs.getutm.app/guest-support/windows/">https://docs.getutm.app/guest-support/windows/</a>,
              they just make UTM work better with macOS‚Ä¶)
            </li>
            <li>Download and open a UTM VM template: <a href=
            "https://web.archive.org/web/20230218145944/https://chrisp.cafe/UTM/Windows_10_x64.utm.zip">
              https://web.archive.org/web/20230218145944/https://chrisp.cafe/UTM/Windows_10_x64.utm.zip</a>
              (this is an archived copy of a template which used to be on chrisp.cafe‚Äôs website ü§∑)
              <ul>
                <li>Move the template to where you want to keep your virtual Windows 10 machine.
                Don‚Äôt keep it in Downloads or put it in your iCloud Drive or anything like that.
                Your Windows VM will eventually be multiple GB in size and I ended up with many GBs
                of stuff in my Downloads folder, which I didn‚Äôt want.
                </li>
                <li>Double click the template file to open UTM and you‚Äôll see it in the UTM sidebar
                and a play button to start it up. <strong>Click play to run it.</strong>
                </li>
                <li>Using this UTM template is important because it‚Äôs already setup to prevent you
                from having weird network issues during the Windows install.
                </li>
              </ul>
            </li>
            <li>Use the CD icon in the toolbar to change to the windows 10 ISO as the disk
            </li>
            <li>Reboot, and make sure to hit space so it boots from a CD or DVD
              <ul>
                <li>If you pay attention when the computer is booting up, you‚Äôll see it says ‚Äúpress
                any key to boot from CD or DVD‚Äù and that‚Äôs why we hit a key ‚Äì we want to boot from
                our Windows 10 ISO
                </li>
                <li>This will boot into the Windows installer üôå we are getting there
                </li>
              </ul>
            </li>
            <li>Choose your language and tell it you don‚Äôt have a product key
              <ul>
                <li>You won‚Äôt have to pay for Windows. You can use Windows for a short time without
                entering a product key and we will be done before that time is over. And we can
                always start over with a fresh VM in UTM if it starts to complain.
                </li>
              </ul>
            </li>
            <li>Choose Windows 10 Pro. Choose Custom Install (advanced).
            </li>
            <li>When you get to the ‚Äúchoose a disk‚Äù screen, there won‚Äôt be any disks visible. We
            need to install the drivers so Windows can see them.
              <ol>
                <li>Use the CD icon to change to the virtio ISO file, the drivers virtual disk we
                downloaded. We are going to load 3 drivers.
                </li>
                <li>Click ‚ÄúLoad driver‚Äù
                </li>
                <li>Navigate into the CD‚Äôs directories with ‚ÄúBrowse‚Äù
                </li>
                <li>
                  <code>smbus &gt; 2k8 &gt; amd64</code>, ‚ÄúNext‚Äù
                </li>
                <li>‚ÄúLoad driver‚Äù again, ‚ÄúBrowse‚Äù
                </li>
                <li>
                  <code>qxldod &gt; w10 &gt; amd64</code>, ‚ÄúNext‚Äù
                </li>
                <li>‚ÄúLoad driver‚Äù one last time, ‚ÄúBrowse‚Äù
                </li>
                <li>
                  <code>viostor &gt; w10 &gt; amd64</code>, ‚ÄúNext‚Äù
                </li>
                <li>Now the Drive shows up and can be chosen to install Windows onto it, but you
                can‚Äôt proceed with ‚ÄúNext‚Äù yet‚Ä¶
                </li>
                <li>Use the CD icon to change back to the Windows 10 ISO
                </li>
                <li>Click ‚ÄúRefresh‚Äù
                </li>
                <li>Now you can click ‚ÄúNext‚Äù, and now it will take a very long time‚Ä¶ until it asks
                you to provide a username
                </li>
              </ol>
            </li>
            <li>Provide a username, leave the password blank, ‚ÄúNext‚Äù, and it boots into Windows üéâ
            </li>
            <li>Use the CD icon to change to the Guest Tools ISO
              <ol>
                <li>Open the CD in the Explorer
                </li>
                <li>Run the spice guest tools application on the CD
                </li>
                <li>Eject the CD once it‚Äôs done
                </li>
              </ol>
            </li>
            <li>Shutdown Windows
              <ul>
                <li>If the screen is black for a long time, the VM doesn‚Äôt know that windows has
                quit so you can just power it off yourself (it‚Äôs like having a real, old computer‚Ä¶)
                </li>
              </ul>
            </li>
            <li>Click the icon to edit the VM‚Äôs options
            </li>
            <li>Add a Network where the Disk stuff is
              <ul>
                <li>Make sure it‚Äôs a <code>virtio-net-pci</code> one
                </li>
              </ul>
            </li>
            <li>Change the Display graphics to <code>virtio-gpu-cpi</code>
              <ul>
                <li>Don‚Äôt choose Retina, it will be sloooooow
                </li>
              </ul>
            </li>
            <li>Now download and install an old iTunes version that still works
              <ul>
                <li>Download and install iTunes from this page: <a href=
                "https://support.apple.com/en-us/106372">https://support.apple.com/en-us/106372</a>
                </li>
                <li>Don‚Äôt download iTunes from the Microsoft Store it can‚Äôt deal with iPods
                </li>
                <li>You‚Äôll need to restart Windows after installing it
                </li>
              </ul>
            </li>
            <li>Plug in your iPod and UTM will try to grab the USB device from macOS, you‚Äôll need
            to say ‚ÄúOK‚Äù or ‚ÄúAllow‚Äù twice for it to work. The iPod will now show up in Windows.
            </li>
            <li>iTunes should now be able to restore it just fine, it might be slow though
            </li>
            <li>Choose to use it as a disk in iTunes and apply that change
            </li>
          </ol>
          <p>
            Now you can put music on there from your Mac, but only if UTM is not running, so
            shutdown Windows and completely quit UTM.
          </p>
          <h2 id="2-adding-music">
            2) Adding Music‚Ä¶
          </h2>
          <p>
            I don‚Äôt want to deal with iTunes on Windows or Mac day-to-day‚Ä¶ and it turns out one can
            just use the Finder to put music files on the iPod, run a python script in the Terminal
            and it will jam all those files into the iPod‚Äôs internal database.
          </p>
          <p>
            The python script is from: <a href=
            "https://github.com/andrewfowlie/shuffle-db3">https://github.com/andrewfowlie/shuffle-db3</a>
          </p>
          <p>
            <strong>First,</strong> you‚Äôll need to install python and then install one package:
          </p>
          <div class="highlight">
            <pre class="chroma" tabindex="0"><code class="language-sh" data-lang="sh"><span class=
            "line"><span class="cl"><span class=
            "c1"># if you don't have brew installed, then that is a whole deal and you can read more over at https://brew.sh</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">brew install python
</span></span><span class="line"><span class="cl">pip3 install --break-system-packages eyed3
</span></span></code></pre>
          </div>
          <p>
            Then we can download the python script directly from the code repository.
          </p>
          <pre tabindex=
          "0"><code>cd ~/Downloads &amp;& curl -O "https://raw.githubusercontent.com/andrewfowlie/shuffle-db3/master/src/python/rebuild_db3.py"
</code></pre>
          <p>
            In the Finder, drag the <code>rebuild_db3.py</code> file from your Downloads folder to
            the iPod‚Äôs drive that is mounted there. It needs to be at the root.
          </p>
          <p>
            Now, <strong>second,</strong> make a folder on the iPod‚Äôs drive named ‚ÄúMusic‚Äù ‚Äì put
            your mp3‚Äôs and m4a‚Äôs in there. You can even do nested folders. The iPod will play
            things in file order by default, so you can name stuff to get them into the order you
            want like <code>01</code>, <code>02</code>, ‚Ä¶
          </p>
          <p>
            After you have them all in there, <strong>third,</strong> you can run this so the iPod
            will recognize and play those files:
          </p>
          <div class="highlight">
            <pre class="chroma" tabindex="0"><code class="language-sh" data-lang="sh"><span class=
            "line"><span class="cl"><span class=
            "c1"># Make sure to replace iPod with the name of your iPod. If you don't know the name of your iPod, then you can type "cd " and then drag the iPod's drive from the Finder into the Terminal window and it will insert the path to it.</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> /Volumes/iPod/
</span></span><span class="line"><span class="cl">python3 rebuild_db3.py Music/
</span></span></code></pre>
          </div>
          <p>
            So you‚Äôre telling python ‚Äúrebuild the database using this Music folder.‚Äù
          </p>
          <blockquote>
            <p>
              Or, if you‚Äôre like me and you will definitely forget all that, you can download my
              <code>rebuild.command</code> file and just double click that to run the rebuild
              script.
            </p>
            <pre><code>cd ~/Downloads &amp;& curl -O "https://gist.githubusercontent.com/myobie/5c0c25cc867420ba15885e53a9a3e133/raw/ac91f695f02c5c2b0b1e8a0c5a6398830eeddd08/rebuild.command"
cd ~/Downloads &amp;& chmod +x rebuild.command
</code></pre>
            <p>
              Drag the <code>rebuild.command</code> file onto the iPod‚Äôs drive, and now you can
              double click that to run the python script for you. You can look here and see that
              <code>rebuild.command</code> file is just that one line that starts with
              <code>python</code>: <a href=
              "https://gist.github.com/myobie/5c0c25cc867420ba15885e53a9a3e133">https://gist.github.com/myobie/5c0c25cc867420ba15885e53a9a3e133</a>
            </p>
          </blockquote>
          <p>
            Tada üéâ
          </p>
          <p>
            Now you have working iPod shuffle that can clip on your shirt and provide you music and
            happiness for 4‚Äì8 hours (·µî·µï·µî)/
          </p>
          <p>
            <em>(If I get time, I‚Äôll try to update this with screenshots‚Ä¶ we‚Äôll see‚Ä¶)</em>
          </p>
        </div>
        <footer>
          <p>
            Posted on <time datetime="2024-04-30T00:21:41+02:00">30 Apr, 2024</time>
          </p>
        </footer>
      </article>
    </main>
    <script async src="/behavior.js"></script> 
    <script data-domain="nathanherald.com" defer src="https://stats.myobie.wtf/script.js"></script>
  </body>
</html>
