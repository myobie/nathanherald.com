<!DOCTYPE html>
<html>
  <head lang="en-us">
    <meta content="HTML Tidy for HTML5 for Apple macOS version 5.8.0" name="generator">
    <meta charset="UTF-8">
    <title>
      Iâ€˜m Nathan Herald â†’ S.js and some thoughts about reactive state
    </title>
    <script>
      if ((new URL(window.location.href)).host === 'myobie.com') { window.location.assign('https://nathanherald.com') }
    </script>
    <link href="https://nathanherald.com/posts/links/s-dot-js/" rel="canonical">
    <link href="https://cloud.typography.com/6836312/761366/css/fonts.css" rel="stylesheet" type=
    "text/css">
    <link href="/styles.css" rel="stylesheet" type="text/css">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="Hugo 0.136.5" name="generator">
    <meta content="Iâ€˜m Nathan Herald â†’ S.js and some thoughts about reactive state" name="title">
    <meta content="" name="description">
    <meta content="S.js and some thoughts about reactive state" property="og:title">
    <meta content="website" property="og:type">
    <meta content="" property="og:description">
    <meta content="https://nathanherald.com/posts/links/s-dot-js/" property="og:url">
    <meta content="/og.png" property="og:image">
    <meta content="Iâ€˜m Nathan Herald" property="og:site_name">
    <link href="/rss.xml" rel="alternate" title="Feed of all the posts on nathanherald.com" type=
    "application/rss+xml">
  </head>
  <body>
    <header class="section-header">
      <div class="section-nav">
        <h1 class="home-link">
          <a class="never-underline" data-nospan="" href="/"><abbr title="Hello">ğŸ‘‹</abbr></a>
          <a href="/">Iâ€™m Nathan</a>
        </h1>
        <nav>
          <p>
            Find more in the <a href="/posts/">archive of all the posts on this site</a> or
            <a href="/rss.xml">subscribe with RSS</a>.
          </p>
        </nav>
      </div>
    </header>
    <main class="single">
      <article>
        <header>
          <h1>
            <a href="https://github.com/adamhaile/S">S.js and some thoughts about reactive
            state</a>
          </h1>
          <p class="annotation">
            ğŸ”— a link post linking to github.com
          </p>
        </header>
        <div class="content">
          <p>
            I recently stumbled upon the <a href="https://github.com/adamhaile/S">S.js</a>
            â€œreactive state libraryâ€ and the related <a href=
            "https://github.com/adamhaile/surplus">surplus</a> web framework which builds upon it,
            and I wanted to recommend reading though it to any developer wanting to learn more
            about building web UIs with reactive state. The ideas I see in surplus are <em>so</em>
            similar to the ideas Iâ€™ve been working towards with <a href="https://new.space/">with
            the Shareup team building new.space</a>.
          </p>
          <p>
            Weâ€™ve been iterating on how our application state is stored and how we interact with it
            in our UI components. 99% of the appâ€™s state is stored in IndexedDB in the browser, so
            we really only need an in-memory mirror of the databaseâ€™s state to hand to the UI when
            rendering.
          </p>
          <p>
            Our web appâ€™s UI is written using <a href="https://preactjs.com">preact</a>, and the
            default way to handle state in a contemporary (p)react app is to use
            <code>useState()</code> or <code>useReducer()</code>. <em>Sure, there is <a href=
            "https://redux.js.org">redux</a>, but the boilerplate of actions and all that is a lot
            for me.</em>
          </p>
          <p>
            <code>useState()</code> is great for a web UI that loads some data, then displays it,
            and thatâ€™s it. Itâ€™s not great for a web UI that holds all of its data locally in
            indexedDB and wants the UI to react to any changes to the underlying storage over time.
            One either has to put a giant state/reducer way up in a root component or context, or
            one has lots of little states that all get lost anytime a large part of the UI changes.
          </p>
          <p>
            Navigating from one section of the app to another shouldnâ€™t need to completely dump and
            reload from indexedDB â€“&nbsp;we just had that state and it doesnâ€™t need to disappear
            when un-mounting. Yet, if one lifts the state up to a root-ish-level component, then
            the entire app UI will re-render for every little change to the underlying storage.
            Showing a progress meter is hilarious in that scenario.
          </p>
          <p>
            <a href="https://github.com/adamhaile/surplus">surplus</a> seems like the right idea:
            lift the state entirely out of the UI, make it reactive by default, and let the UI be a
            function of the reactive state. Only the parts of the app that use a part of the state
            need to re-render when that state changes.
          </p>
          <p>
            We are using, and really like, <a href=
            "https://preactjs.com/guide/v10/signals/">signals</a> which are surprisingly very
            similar to <a href="https://github.com/adamhaile/S">S.js</a>â€¦ and <a href=
            "https://github.com/adamhaile/S">S.js</a> and <a href=
            "https://github.com/adamhaile/surplus">surplus</a> are both like 7â€“8 years old ğŸ«¢ Iâ€™m
            surprised I hadnâ€™t come across it until now. Building high-performance web UIs is still
            a tough job all these years later ğŸ˜…
          </p>
        </div>
        <footer>
          <p>
            <a href="https://github.com/adamhaile/S">Check it out over on github.com â†’</a>
          </p>
          <p>
            Linked to on <time datetime="2023-08-17T15:09:37+02:00">17 Aug, 2023</time> <a class=
            "never-underline" href="https://github.com/adamhaile/S"><abbr title="link">ğŸ”—</abbr></a>
          </p>
        </footer>
      </article>
    </main>
    <script data-domain="nathanherald.com" defer src="https://stats.myobie.wtf/script.js"></script>
    
    <script async src="/transitions.js"></script>
  </body>
</html>
